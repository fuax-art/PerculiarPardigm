<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Paradigm of Peculiar Particles - Zen Garden Mode</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div id="container">
        <button class="toggle-controls" title="Toggle Controls" aria-expanded="false">
            <img src="fuaxface.svg" alt="Brand" class="brand-icon" aria-hidden="true" />
            <span class="sr-only">Controls</span>
        </button>

        <div id="controls" class="hidden">
            <!-- NEW: ZEN MODE SECTION -->
            <div class="control-group zen-highlight">
                <div class="control-group-header">
                    <h3>ðŸ§˜ Zen Garden Mode</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Enable Zen Mode</label>
                        <select id="zenMode">
                            <option value="true" selected>On (Gentle Fade)</option>
                            <option value="false">Off (Normal)</option>
                        </select>
                    </div>
                    <div class="control-item">
                        <label>Ghost Duration</label>
                        <input type="range" id="ghostDuration" min="5" max="60" value="30" step="5">
                        <div class="value-display" id="ghostDurationValue">30s</div>
                    </div>
                    <div class="control-item">
                        <button onclick="gentleClear()" class="zen-button">ðŸŒŠ Gentle Clear</button>
                    </div>
                    <div class="zen-info">
                        <small>Zen mode makes particles linger and fade gracefully. Gentle Clear lets them peacefully dissolve.</small>
                    </div>
                </div>
            </div>

            <!-- NEW: MODE SELECTOR -->
            <div class="control-group">
                <div class="control-group-header">
                    <h3>ðŸŽ¨ Physics Mode</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Select Mode</label>
                        <select id="physicsMode">
                            <option value="zen" selected>Zen Garden</option>
                            <option value="fluid">Fluid Ink</option>
                            <option value="glitch">Neural Glitch</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- NEW: FLUID INK CONTROLS -->
            <div id="fluid-controls" class="control-group hidden">
                <div class="control-group-header">
                    <h3>ðŸ’§ Fluid Ink</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Viscosity</label>
                        <input type="range" id="viscosity" min="0" max="1" value="0.5" step="0.01">
                        <div class="value-display" id="viscosityValue">0.5</div>
                    </div>
                    <div class="control-item">
                        <label>Buoyancy</label>
                        <input type="range" id="buoyancy" min="-1" max="1" value="0.1" step="0.01">
                        <div class="value-display" id="buoyancyValue">0.1</div>
                    </div>
                    <div class="control-item">
                        <label>Diffusion Rate</label>
                        <input type="range" id="diffusionRate" min="0" max="1" value="0.2" step="0.01">
                        <div class="value-display" id="diffusionRateValue">0.2</div>
                    </div>
                    <div class="control-item">
                        <label>Swirl Intensity</label>
                        <input type="range" id="swirlIntensity" min="0" max="5" value="1" step="0.1">
                        <div class="value-display" id="swirlIntensityValue">1</div>
                    </div>
                </div>
            </div>

            <!-- NEW: NEURAL GLITCH CONTROLS -->
            <div id="glitch-controls" class="control-group hidden">
                <div class="control-group-header">
                    <h3>ðŸ§  Neural Glitch</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Anchor Strength</label>
                        <input type="range" id="anchorStrength" min="0" max="1" value="0.5" step="0.01">
                        <div class="value-display" id="anchorStrengthValue">0.5</div>
                    </div>
                    <div class="control-item">
                        <label>Glitch Jitter</label>
                        <input type="range" id="glitchJitter" min="0" max="5" value="1.0" step="0.1">
                        <div class="value-display" id="glitchJitterValue">1.0</div>
                    </div>
                    <div class="control-item">
                        <label>Influence Radius</label>
                        <input type="range" id="influenceRadius" min="0" max="50" value="15" step="1">
                        <div class="value-display" id="influenceRadiusValue">15</div>
                    </div>
                    <div class="control-item">
                        <label>Snap Speed</label>
                        <input type="range" id="snapSpeed" min="0" max="10" value="3.0" step="0.1">
                        <div class="value-display" id="snapSpeedValue">3.0</div>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-header">
                    <h3>Interaction</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Click Burst Size</label>
                        <input type="range" id="burstSize" min="10" max="200" value="99" step="9">
                        <div class="value-display" id="burstSizeValue">99</div>
                    </div>
                    <div class="control-item">
                        <label>Drag Trail Density</label>
                        <input type="range" id="trailDensity" min="5" max="50" value="33" step="1">
                        <div class="value-display" id="trailDensityValue">33</div>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-header">
                    <h3>Emission</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Particle Count (Max)</label>
                        <input type="range" id="particleCount" min="100" max="30000" value="30000" step="100">
                        <div class="value-display" id="particleCountValue">30000</div>
                    </div>
                    <div class="control-item">
                        <label>Emission Rate</label>
                        <input type="range" id="emissionRate" min="1" max="100" value="69" step="1">
                        <div class="value-display" id="emissionRateValue">69/s</div>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-header">
                    <h3>Physics</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Gravity</label>
                        <input type="range" id="gravity" min="-2" max="2" value="-0.3" step="0.001">
                        <div class="value-display" id="gravityValue">-0.3</div>
                    </div>
                    <div class="control-item">
                        <label>Initial Speed</label>
                        <input type="range" id="initialSpeed" min="0" max="5" value="2" step="0.1">
                        <div class="value-display" id="initialSpeedValue">2</div>
                    </div>
                    <div class="control-item">
                        <label>Spread Angle</label>
                        <input type="range" id="spreadAngle" min="0" max="360" value="133" step="1">
                        <div class="value-display" id="spreadAngleValue">133</div>
                    </div>
                    <div class="control-item">
                        <label>Air Resistance</label>
                        <input type="range" id="airResistance" min="0" max="0.1" value="0.02" step="0.001">
                        <div class="value-display" id="airResistanceValue">0.02</div>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-header">
                    <h3>Appearance</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Start Color</label>
                        <input type="color" id="startColor" value="#ffffff">
                    </div>
                    <div class="control-item">
                        <label>End Color</label>
                        <input type="color" id="endColor" value="#ff00cc">
                    </div>
                    <div class="control-item">
                        <label>Size</label>
                        <input type="range" id="particleSize" min="0.1" max="10" value="3.9" step="0.1">
                        <div class="value-display" id="particleSizeValue">3.9</div>
                    </div>
                    <div class="control-item">
                        <label>Size Variation</label>
                        <input type="range" id="sizeVariation" min="0" max="5" value="3.5" step="0.1">
                        <div class="value-display" id="sizeVariationValue">3.5</div>
                    </div>
                    <div class="control-item">
                        <label>Opacity</label>
                        <input type="range" id="opacity" min="0" max="1" value="0.7" step="0.1">
                        <div class="value-display" id="opacityValue">0.7</div>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-header">
                    <h3>Behavior</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Lifespan</label>
                        <input type="range" id="lifespan" min="1" max="180" value="120" step="5">
                        <div class="value-display" id="lifespanValue">120s</div>
                    </div>
                    <div class="control-item">
                        <label>Turbulence</label>
                        <input type="range" id="turbulence" min="0" max="2" value="0.5" step="0.01">
                        <div class="value-display" id="turbulenceValue">0.5</div>
                    </div>
                    <div class="control-item">
                        <label>Shape</label>
                        <select id="particleShape">
                            <option value="cube">Cube</option>
                            <option value="point">Point</option>
                            <option value="sphere">Sphere</option>
                        </select>
                    </div>
                    <div class="control-item">
                        <label>Blend Mode</label>
                        <select id="blendMode">
                            <option value="normal">Normal</option>
                            <option value="additive">Additive</option>
                            <option value="subtactive">Subtract</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <div class="control-group-header">
                    <h3>Environment</h3>
                    <span>â–¼</span>
                </div>
                <div class="control-group-body">
                    <div class="control-item">
                        <label>Wind X</label>
                        <input type="range" id="windX" min="-3" max="3" value="-0.3" step="0.01">
                        <div class="value-display" id="windXValue">-0.3</div>
                    </div>
                    <div class="control-item">
                        <label>Wind Y</label>
                        <input type="range" id="windY" min="-3" max="3" value="0.2" step="0.01">
                        <div class="value-display" id="windYValue">0.2</div>
                    </div>
                    <div class="control-item">
                        <label>Wind Z</label>
                        <input type="range" id="windZ" min="-3" max="3" value="0.1" step="0.01">
                        <div class="value-display" id="windZValue">0.1</div>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <button onclick="resetToDefaults()">Reset to Zen Defaults</button>
                <button onclick="toggleAnimation()" id="animationButton">Pause</button>
            </div>

            <div id="stats">
                <div>Active Particles: <span id="activeParticles">0</span></div>
                <div>FPS: <span id="fps">60</span></div>
            </div>

        </div>

        <script type="module" src="app.js"></script>
    </div>
</body>
</html>